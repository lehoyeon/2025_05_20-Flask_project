<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>λ€μ—¬ μ‹μ¤ν… λ€μ‹λ³΄λ“</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
</head>
<body>
  <h1 class="text-center my-4">π“ λ€μ—¬ μ‹μ¤ν… λ€μ‹λ³΄λ“</h1>

  <div class="card-container">
    <div class="card">
      <h2>μ¤λ λ€μ—¬ μ</h2>
      <div class="highlight" id="todayRentCount">β€‘</div>
    </div>
    <div class="card">
      <h2>μ¤λ λ°λ‚© μ</h2>
      <div class="highlight" id="todayReturnCount">β€‘</div>
    </div>
    <div class="card">
      <h2>λ„μ  λ€μ—¬ κΈμ•΅</h2>
      <div class="highlight" id="totalRevenue">β€‘</div>
    </div>
  </div>

  <div class="list my-4">
    <h3>π“ μΈκΈ° λ€μ—¬ λ¬Όν’ TOP3</h3>
    <ul id="topItems">
      <li>λ΅λ”© μ¤‘...</li>
    </ul>
  </div>

  <script>
    // κ°„λ‹¨ Ajax λ΅λ“ (Flask μ—”λ“ν¬μΈνΈμ— λ§κ² μμ • κ°€λ¥)
    fetch("/status-data")
      .then(r => r.json())
      .then(d => {
        document.getElementById("todayRentCount").textContent   = d.today_rentals   + "κ±΄";
        document.getElementById("todayReturnCount").textContent = d.today_returns   + "κ±΄";
        document.getElementById("totalRevenue").textContent     = "β‚©" + d.total_revenue.toLocaleString();

        const ul = document.getElementById("topItems");
        ul.innerHTML = "";
        d.top_items.forEach((v, i) => {
          const li = document.createElement("li");
          li.textContent = `${i+1}. ${v}`;
          ul.appendChild(li);
        });
      });
  </script>
</body>
</html>
